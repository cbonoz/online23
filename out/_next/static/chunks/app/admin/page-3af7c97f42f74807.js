(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{37796:function(e,t,n){Promise.resolve().then(n.bind(n,3926))},3926:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(57437),a=n(88110),i=n.n(a),r=n(40155),l=n(43574),c=n(2265),o=n(86260),d=n(23199),u=n(67245);function f(){let[e,t]=(0,c.useState)(!1),[n,a]=(0,c.useState)(),[f,h]=(0,c.useState)(),[g,b]=(0,c.useState)(),[x,p]=(0,c.useState)(),{provider:j}=(0,u.useWallet)();async function v(){if(x){b(),t(!0);try{let e=await (0,d.dI)(j.signer,x);h(e)}catch(e){console.error("verifying listing",e)}t(!1)}}let y=o.YW&&o.um;return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Admin"}),(0,s.jsxs)("p",{children:["The function contains admin actions for the ",o.iC," application. "]}),g&&(0,s.jsx)("div",{className:"error-text",children:g}),(0,s.jsx)(r.Z,{}),(0,s.jsxs)("h3",{children:["Manage ",o.iC," app tables"]}),(0,s.jsxs)("p",{children:["This command creates the production tables used for storing listings and offers in the ",o.iC," application. Note this may require several confirmations, see setupTables for details. Steps:",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"1) If no tables in `.env`, create listing and offer tables on Tableland then apply public access grants to each.",(0,s.jsx)("br",{}),"2) If tables in `.env`, apply grants to existing tables."]}),(0,s.jsxs)(i(),{className:"standard-btn",type:"primary",disabled:e,loading:e,onClick:async()=>{t(!0),b();try{let e=await (0,d.Fq)(j.signer);a(e)}catch(e){console.error("error creating tables",e),b(e.message)}finally{t(!1)}},children:[y?"Add grants to":"Create"," app tables"]}),n&&(0,s.jsxs)("div",{children:[(0,s.jsx)("br",{}),(0,s.jsx)("h2",{children:"Created tables: "}),(0,s.jsx)("br",{}),"Listing table: ",n.listingTable,(0,s.jsx)("br",{}),"Offer table: ",n.offerTable]}),(0,s.jsx)(r.Z,{}),(0,s.jsx)("h3",{children:"Verify listing"}),(0,s.jsx)(l.Z,{placeholder:"Listing ID",onChange:e=>{p(e.target.value)},value:x}),(0,s.jsx)("br",{}),(0,s.jsx)(i(),{type:"primary",disabled:e,loading:e,onClick:v,className:"standard-btn",children:"Validate listing"}),f&&(0,s.jsxs)("div",{className:"success-text",children:["Listing verified",JSON.stringify(f)]}),(0,s.jsx)(r.Z,{})]})}},67245:function(e,t,n){"use strict";n.r(t),n.d(t,{WalletContext:function(){return r},WalletProviderWrapper:function(){return l},useWallet:function(){return c}});var s=n(57437),a=n(2265),i=n(93697);let r=(0,a.createContext)({}),l=e=>{let{children:t}=e,[n,l]=(0,a.useState)(null),[c,o]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),f=async()=>{let e=new i.ig,t=await e.connectWallet({wallet:i.Ag.METAMASK});l(t),o(e),u(await e.getProvider())},h=async()=>{try{await c.disconnectWallet()}catch(e){console.error("error logging out",e)}l(null)};return(0,s.jsx)(r.Provider,{value:{wallet:n,connect:f,logout:h,provider:d,dataverseConnector:c,test:5},children:t})},c=()=>(0,a.useContext)(r)}},function(e){e.O(0,[941,26,409,44,110,697,664,574,22,971,596,744],function(){return e(e.s=37796)}),_N_E=e.O()}]);